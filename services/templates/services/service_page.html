{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
{# --- Service Detail Page --- #}
<article class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 pt-16 pb-0">

    {# --- Back link --- #}
    <div class="mb-8" data-aos="fade-up">
        <a href="{% pageurl page.get_parent %}"
           class="text-brand-600 hover:text-brand-700 font-medium transition">
            ← Back to Services
        </a>
    </div>

    {# --- Title --- #}
    <header class="mb-8" data-aos="fade-up">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900">
            {{ page.title }}
        </h1>
    </header>

    {# --- Summary + Image side-by-side --- #}
    <div class="flex flex-col md:flex-row md:items-start gap-8 mb-8" data-aos="fade-up">
        {# --- Summary (left ~50%) --- #}
        <div class="md:w-1/2">
            <div class="bg-brand-50 border-l-4 border-brand-500 p-6 rounded-r-xl h-full">
                <p class="text-gray-700 text-lg">
                    {{ page.short_summary }}
                </p>
            </div>
        </div>

        {# --- Service Image (right ~50%) --- #}
        {% if page.service_image %}
        <figure class="md:w-1/2">
            <div class="rounded-xl overflow-hidden shadow-lg">
                {% image page.service_image fill-480x320 class="w-full h-auto" %}
            </div>
            {% if page.image_caption %}
            <figcaption class="text-sm text-gray-500 mt-2 text-center italic">
                {{ page.image_caption }}
            </figcaption>
            {% endif %}
        </figure>
        {% endif %}
    </div>

    {# --- Full Description --- #}
    <div class="prose prose-lg prose-teal max-w-none mb-8" data-aos="fade-up">
        {{ page.description|richtext }}
    </div>

    {# --- CTA --- #}
    <div class="text-center py-4" data-aos="fade-up">
        <a href="/booking/?service={{ page.slug }}"
           class="inline-block bg-brand-600 text-white font-semibold px-8 py-4 rounded-lg text-lg hover:bg-brand-700 transition shadow-lg hover:shadow-xl">
            Book an Appointment
        </a>
        <p class="text-sm text-gray-500 mt-4">
            First time? <a href="/your-first-visit/" class="text-brand-600 hover:text-brand-700 font-medium underline">See what to expect →</a>
        </p>
    </div>

    {# --- Pricing & Duration (collapsible) --- #}
    {% if page.price_label or page.duration_label %}
    <details class="group mb-0 rounded-xl border border-gray-200 bg-white shadow-sm overflow-hidden" data-aos="fade-up">
        <summary class="list-none flex items-center justify-between cursor-pointer select-none px-6 py-5 hover:bg-gray-50 transition-colors">
            <span class="flex items-center gap-3 text-gray-900 font-semibold">
                <svg class="w-5 h-5 text-brand-600" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                </svg>
                View Pricing &amp; Duration
            </span>
            <svg class="w-4 h-4 text-gray-400 transition-transform duration-200 group-open:rotate-180" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5" />
            </svg>
        </summary>
        <div class="px-6 py-4 bg-gray-50 border-t border-gray-100">
            <div class="flex flex-wrap items-center gap-6 text-base text-gray-700">
                {% if page.price_label %}
                <div class="flex items-center gap-2">
                    <span class="font-medium text-gray-500">Price:</span>
                    <span class="font-semibold text-brand-700">{{ page.price_label }}</span>
                </div>
                {% endif %}
                {% if page.duration_label %}
                <div class="flex items-center gap-2">
                    <span class="font-medium text-gray-500">Duration:</span>
                    <span class="font-semibold text-gray-900">{{ page.duration_label }}</span>
                </div>
                {% endif %}
            </div>
        </div>
    </details>
    {% endif %}

</article>
{# --- Policies (Deposit + Cancellation) --- #}
{% include "includes/policies.html" %}

{# --- Testimonials --- #}
{% load testimonial_tags %}
{% testimonials_section service=page %}
{% endblock %}


