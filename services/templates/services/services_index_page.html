{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
{# --- Page Header --- #}
<section class="bg-brand-50 py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center" data-aos="fade-up">
        <h1 class="text-4xl md:text-5xl font-bold text-gray-900 mb-4">
            {{ page.title }}
        </h1>
        {% if page.intro %}
        <p class="text-lg text-gray-600 max-w-2xl mx-auto">
            {{ page.intro }}
        </p>
        {% endif %}
    </div>
</section>

{# --- Services Grid --- #}
<section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16">
    {% if services %}
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
        {% for service in services %}
        <div class="bg-white border border-gray-200 rounded-xl shadow-sm hover:shadow-lg transition-shadow duration-300 overflow-hidden flex flex-col"
             data-aos="fade-up"
             data-aos-delay="{% cycle '0' '100' '200' %}">

            {# --- Service Image --- #}
            {% if service.service_image %}
            <div class="h-48 overflow-hidden">
                {% image service.service_image fill-400x200 class="w-full h-full object-cover" %}
            </div>
            {% else %}
            <div class="h-48 bg-brand-100 flex items-center justify-center">
                <svg class="w-16 h-16 text-brand-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                          d="M4.26 10.147a60.438 60.438 0 0 0-.491 6.347A48.62 48.62 0 0 1 12 20.904a48.62 48.62 0 0 1 8.232-4.41 60.46 60.46 0 0 0-.491-6.347m-15.482 0a50.636 50.636 0 0 0-2.658-.813A59.906 59.906 0 0 1 12 3.493a59.903 59.903 0 0 1 10.399 5.84c-.896.248-1.783.52-2.658.814m-15.482 0A50.717 50.717 0 0 1 12 13.489a50.702 50.702 0 0 1 7.74-3.342" />
                </svg>
            </div>
            {% endif %}

            {# --- Card Body --- #}
            <div class="p-6 flex flex-col flex-grow">
                <h2 class="text-xl font-bold text-gray-900 mb-2">
                    {{ service.title }}
                </h2>
                <p class="text-gray-600 text-sm leading-relaxed mb-4 flex-grow">
                    {{ service.short_summary }}
                </p>

                {# --- Price & Duration --- #}
                <div class="flex items-center justify-between mb-4">
                    <span class="text-2xl font-bold text-brand-700">
                        {{ service.price_label }}
                    </span>
                    {% if service.duration_label %}
                    <span class="text-sm text-gray-500">
                        {{ service.duration_label }}
                    </span>
                    {% endif %}
                </div>

                {# --- Link to detail page --- #}
                <a href="{% pageurl service %}"
                   class="block text-center bg-brand-600 text-white py-3 rounded-lg hover:bg-brand-700 transition font-medium">
                    Learn More
                </a>

                {# --- Book This Service --- #}
                {% if service.cal_booking_url %}
                <a href="/booking/?service={{ service.slug }}"
                   class="block text-center border-2 border-brand-600 text-brand-600 py-3 rounded-lg hover:bg-brand-50 transition font-medium mt-2">
                    Book Now
                </a>
                {% endif %}
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="text-center text-gray-500 text-lg">
        Services coming soon â€” check back shortly!
    </p>
    {% endif %}
</section>

{# --- Cancellation Policy --- #}
{% if settings.home.SiteSettings.cancellation_policy %}
<section class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8 pb-16">
    <div class="bg-gray-50 border border-gray-200 rounded-xl p-8" data-aos="fade-up">
        <h3 class="text-lg font-bold text-gray-900 mb-3 flex items-center gap-2">
            <svg class="w-5 h-5 text-brand-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M11.25 11.25l.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z" />
            </svg>
            Cancellation Policy
        </h3>
        <div class="prose prose-sm prose-teal max-w-none text-gray-600">
            {{ settings.home.SiteSettings.cancellation_policy|richtext }}
        </div>
    </div>
</section>
{% endif %}
{% endblock %}
